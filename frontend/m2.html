<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>M2 â€” Despierta a tu Aliado (venv) â€” Tu cuarto seguro de Python</title>
  <link rel="stylesheet" href="assets/css/style-dark.css" />
</head>
<body>
  <header class="portal-header">
    <div class="portal-header__top">
      <div class="portal-header__brand">
        <span class="portal-header__logo" aria-hidden="true">BC</span>
        <div class="portal-header__brand-text">
          <span class="portal-header__brand-title">Portal de Misiones</span>
          <span class="portal-header__brand-subtitle">BlockCorp</span>
        </div>
      </div>
      <nav class="portal-header__nav" aria-label="NavegaciÃ³n principal">
        <a class="portal-header__link" href="/index.html">Inicio</a>
        <a class="portal-header__link"
           href="#"
           onclick="setCurrentMission('m2'); clearSession(); renderEnrollForm(); return false;">
          Inscribirme
        </a>
      </nav>
      <div class="portal-header__user">
        <div class="portal-header__user-info">
          <span class="portal-header__user-label">SesiÃ³n activa</span>
          <span class="portal-header__user-name">agente.nova</span>
        </div>
        <div class="portal-header__actions">
          <button class="portal-header__action portal-header__action--ghost" type="button">
            Centro de ayuda
          </button>
          <button class="portal-header__action" type="button">
            Cerrar sesiÃ³n
          </button>
        </div>
      </div>
    </div>
    <div class="portal-header__body">
      <h1 class="portal-header__heading">M2 â€” Despierta a tu Aliado (venv) â€” Tu cuarto seguro de Python</h1>
    </div>
  </header>

  <main hidden>
    <section class="mission mission--detail">
      <header class="mission__header">
        <h2>M2 â€” Despierta a tu Aliado (venv) â€” Tu cuarto seguro de Python</h2>

        <h2>Â¡Bienvenido a la MisiÃ³n 2!</h2>
        <p>Esta misiÃ³n te ayudarÃ¡ a crear un entorno virtual seguro para tus proyectos de Python utilizando <code>venv</code>. Aprende a aislar tus dependencias, configurar tu entorno en VS Code, y dejar todo listo para instalar paquetes como pandas sin daÃ±ar tu sistema global.</p>
      </header>

      <div class="mission-sections">
        <div class="mission-section mission-section--dual">
          <div class="mission-section__card">
            <h3>ğŸ“š Historia</h3>
            <p>Byte te muestra un armario lleno de frascos etiquetados "Python". Cada frasco es distinto, aunque parezca igual. Tu misiÃ³n es preparar un espacio (tu <code>.venv</code>) donde tu frasco funcione sin interferir con los demÃ¡s.</p>
          </div>
          <div class="mission-section__card">
            <h3>ğŸ’¡ Â¿Para quÃ© sirve?</h3>
            <ul>
            <li>Mantener tus paquetes separados de otros proyectos.</li>
            <li>Evitar conflictos entre versiones de librerÃ­as.</li>
            <li>Hacer que VS Code use tu entorno personalizado.</li>
            </ul>
          </div>
        </div>

        <div class="mission-section mission-section--dual">
          <div class="mission-section__card">
            <h3>ğŸ† Objetivos de esta misiÃ³n</h3>
            <ul>
            <li>Crear y activar tu entorno virtual (<code>.venv</code>).</li>
            <li>Configurar VS Code para que use ese entorno.</li>
            <li>Registrar y guardar tus evidencias.</li>
            <li>Hacer commit y sincronizar tu trabajo con GitHub.</li>
            </ul>
          </div>
          <div class="mission-section__card">
            <h3>ğŸ“• Material recomendado</h3>
            <ul>
            <li><a href="https://www.youtube.com/watch?v=MmUKJqjPiHo" target="_blank">Crear y activar venv en Windows</a></li>
            <li><a href="https://www.youtube.com/watch?v=XTmS37AxM3Q" target="_blank">SoluciÃ³n al error de ejecuciÃ³n de scripts en PowerShell</a></li>
            <li><a href="https://www.youtube.com/watch?v=eFThEXvuZaM" target="_blank">Seleccionar intÃ©rprete en VS Code</a></li>
            <li><a href="https://docs.python.org/es/3/library/venv.html" target="_blank">DocumentaciÃ³n oficial de venv</a></li>
            </ul>
          </div>
        </div>

        <div class="mission-section">
          <div class="mission-section__card">
            <h3>ğŸ“ InvestigaciÃ³n: Fichas de conceptos clave</h3>
            <p>Debes crear 4 fichas en <code>students/&lt;usuario&gt;/docs/m2_notes.md</code> con el siguiente formato:</p>
            <pre><code>## &lt;tÃ©rmino&gt;
- **DefiniciÃ³n:** Breve y clara (1â€“2 lÃ­neas).
- **Ejemplo en este proyecto:** CÃ³mo se usÃ³ aquÃ­ (1 lÃ­nea).
- **Error comÃºn:** Algo que puede salir mal (1 lÃ­nea).
- **Fuente:** TÃ­tulo + link + minuto del video.</code></pre>
            <p><strong>TÃ©rminos:</strong> <code>venv</code>, <code>pip</code>, <code>IntÃ©rprete en VS Code</code>, <code>ExecutionPolicy</code>.</p>
          </div>
        </div>

        <div class="mission-section">
          <div class="mission-section__card">
            <h3>ğŸ”§ PrÃ¡ctica paso a paso</h3>
            <p><strong>Terminal abierta en la raÃ­z del repositorio. Rama:</strong> <code>m2-&lt;usuario&gt;</code></p>
            <ol>
            <li>Crear entorno virtual: <code>py -m venv .venv</code></li>
            <li>Activar entorno: <code>.\.venv\Scripts\Activate.ps1</code></li>
            <li>Si hay error de permisos: ejecutar <code>Set-ExecutionPolicy -Scope CurrentUser -ExecutionPolicy RemoteSigned</code></li>
            <li>Verificar Python: <code>python --version</code> (guarda salida)</li>
            <li>Seleccionar intÃ©rprete en VS Code: <code>Ctrl+Shift+P â†’ Python: Select Interpreter</code></li>
            <li>Crear archivo <code>hello.py</code> y ejecutarlo, guardar salida.</li>
            </ol>
          </div>
        </div>

        <div class="mission-section mission-section--dual">
          <div class="mission-section__card">
            <h3>ğŸ“„ Evidencias</h3>
            <ul>
            <li><code>students/&lt;usuario&gt;/docs/m2_python_version.txt</code></li>
            <li><code>students/&lt;usuario&gt;/docs/m2_hello.txt</code></li>
            <li><code>students/&lt;usuario&gt;/docs/m2_notes.md</code> (4 fichas)</li>
            </ul>
          </div>
          <div class="mission-section__card">
            <h3>ğŸ’¾ Commit & Sync</h3>
            <ul>
            <li>Haz commit y push desde VS Code o terminal.</li>
            <li>Verifica en GitHub o usa:
            <ul>
            <li><code>git status</code></li>
            <li><code>git branch --show-current</code></li>
            <li><code>git log --oneline -n 1</code></li>
            </ul>
            </li>
            </ul>
          </div>
        </div>

        <div class="mission-section mission-section--dual">
          <div class="mission-section__card">
            <h3>ğŸ“‘ Checklist final</h3>
            <ul>
            <li>[ ] Fichas completas y subidas</li>
            <li>[ ] venv creado y activo</li>
            <li>[ ] VS Code usando el intÃ©rprete correcto</li>
            <li>[ ] Archivos de evidencia presentes</li>
            <li>[ ] Push hecho y confirmado</li>
            <li>[ ] Quiz completado</li>
            </ul>
          </div>
          <div class="mission-section__card">
            <h3>ğŸ”¬ VerificaciÃ³n del profe</h3>
            <ul>
            <li>Revisa si venv estÃ¡ activo.</li>
            <li>Comprueba que seleccionaste el intÃ©rprete correcto.</li>
            <li>Valida las rutas y nombres de archivos.</li>
            <li>ConfirmaciÃ³n de push.</li>
            </ul>
          </div>
        </div>

        <div class="mission-section mission-section--dual">
          <div class="mission-section__card">
            <h3>ğŸ“š Microquiz</h3>
            <ol>
            <li>Â¿QuÃ© es y para quÃ© sirve <code>.venv</code>?</li>
            <li>Â¿CÃ³mo sabes que estÃ¡ activo?</li>
            <li>Â¿QuÃ© pasa si <code>pip</code> se usa fuera del venv?</li>
            <li>Â¿QuÃ© herramienta usas en VS Code para elegir el intÃ©rprete?</li>
            <li>Â¿QuÃ© comando usas si no puedes activar el venv?</li>
            </ol>
          </div>
          <div class="mission-section__card">
            <h3>ğŸ‘ RÃºbrica (mÃ¡ximo 10 puntos)</h3>
            <ul>
            <li>Fichas: 3 pts</li>
            <li>PrÃ¡ctica: 4 pts</li>
            <li>Evidencias: 2 pts</li>
            <li>Orden y entrega: 1 pt</li>
            </ul>
          </div>
        </div>

        <div class="mission-section">
          <div class="mission-section__card">
            <h3>ğŸš« Errores comunes</h3>
            <ul>
            <li>No activar bien el venv â†’ usar <code>Activate.ps1</code></li>
            <li>VS Code no muestra el entorno â†’ verificar selecciÃ³n</li>
            <li>Error de permisos en PowerShell â†’ ejecutar <code>Set-ExecutionPolicy</code></li>
            </ul>
          </div>
        </div>
      </div>
    </section>

    <section class="verification">
      <button id="verifyBtn">Verificar y Entregar MisiÃ³n</button>
      <div id="verifyResult"></div>
    </section>
  </main>

  <script src="assets/js/main.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', async () => {
      const missionId = 'm2';
      const mainContent = document.querySelector('main');
      const resultDiv = document.getElementById('verifyResult');
      const verifyBtn = document.getElementById('verifyBtn');

      const showMission = () => {
        mainContent?.removeAttribute('hidden');
        verifyBtn?.addEventListener('click', () => {
          verifyMission(missionId, resultDiv);
        });
      };

      const showMessage = (message) => {
        document.body.innerHTML = `
          <main class="mission-locked">
            <section class="status-error">
              <h2>Acceso restringido</h2>
              <p>${message}</p>
              <p><a href="index.html">Volver al portal</a></p>
            </section>
          </main>
        `;
      };

      try {
        const access = await ensureMissionUnlocked(missionId);
        if (access.allowed) {
          showMission();
          return;
        }
        if (access.action === 'redirect' && access.redirectTo) {
          window.location.href = access.redirectTo;
          return;
        }
        showMessage(access.message || 'Debes completar la misiÃ³n anterior antes de continuar con esta etapa.');
      } catch (err) {
        showMessage('No pudimos validar tu acceso. Abre la misiÃ³n desde el portal principal.');
      }
    });
  </script>
</body>
</html>
